{
    "criteria": [
        {
            "criterion": "AllDocuments",
            "passed": true,
            "reason": "All documents pass."
        },
        {
            "criterion": "Domain",
            "passed": false,
            "reason": "Document source unavailable."
        },
        {
            "criterion": "QuestionAnswerStrings",
            "passed": true,
            "reason": "Text contains Q:."
        },
        {
            "criterion": "QuestionAnswerStringsV2",
            "passed": true,
            "reason": "Text contains ['Q:', 'A:']."
        },
        {
            "criterion": "FullyStructured",
            "passed": false,
            "reason": "Does not meet criterion."
        },
        {
            "criterion": "ExamStrings",
            "passed": false,
            "reason": "Does not meet criterion."
        },
        {
            "criterion": "ExamStringsV2",
            "passed": false,
            "reason": "Does not meet criterion."
        },
        {
            "criterion": "ExamplesStrings",
            "passed": false,
            "reason": "Does not meet criterion."
        },
        {
            "criterion": "ListPrefix",
            "passed": false,
            "reason": "Found 0 list prefixes. (Min: 5)"
        },
        {
            "criterion": "ListPrefixV2",
            "passed": false,
            "reason": "Does not meet criterion."
        }
    ],
    "doc_id": "6955",
    "text": "Q:\n\nC libcurl force \"Content-Type\"\n\nI have the follwing C code with libcurl to upload a file to my webserver, almost ok the only problem I need the upload to be \"Content-Type: application/vnd.ms-excel\" but it gets \"Content-Type: application/octet-stream\", tried with headers but now luck. In PHP with curl is easy, I just do curl_setopt($ch, CURLOPT_POSTFIELDS, array(\"importfile\" => \"@\".$file_path . \";type=application/vnd.ms-excel\" and works ok. Any help? Ideas?\n#include <stdio.h>\n#include <string.h>\n#include <curl/curl.h>\n\nint main(int argc, char *argv[])\n{\n  CURL *curl;\n  CURLcode res;\n\n  struct curl_httppost *formpost=NULL;\n  struct curl_httppost *lastptr=NULL;\n  struct curl_slist *headerlist=NULL;\n  static const char buf[] = \"Expect:\";\n\n  curl_global_init(CURL_GLOBAL_ALL);\n\n  curl_formadd(&formpost, &lastptr, CURLFORM_COPYNAME, \"importfile\", CURLFORM_FILE, \"document.csv\", CURLFORM_END);\n  curl_formadd(&formpost, &lastptr, CURLFORM_COPYNAME, \"action\", CURLFORM_COPYCONTENTS, \"upload\", CURLFORM_END);\n\n  curl = curl_easy_init();\n  headerlist = curl_slist_append(headerlist, buf);\n  if(curl) {\n    curl_easy_setopt(curl, CURLOPT_URL, \"http://www.myhost.com/upload/upload.php\");\n    if ( (argc == 2) && (!strcmp(argv[1], \"noexpectheader\")) )\n      curl_easy_setopt(curl, CURLOPT_HTTPHEADER, headerlist);\n    curl_easy_setopt(curl, CURLOPT_HTTPPOST, formpost);\n\n    res = curl_easy_perform(curl);\n    if(res != CURLE_OK)\n      fprintf(stderr, \"curl_easy_perform() failed: %s\\n\",\n              curl_easy_strerror(res));\n\n    curl_easy_cleanup(curl);\n\n    curl_formfree(formpost);\n    curl_slist_free_all (headerlist);\n  }\n  return 0;\n}\n\nTried to add in the HEADER as \"Content-Type: application/vnd.ms-excel\" but is not right, I get:\nContent-Type: application/vnd.ms-excel\n\nin the headers but I need to have:\n------WebbbbFormBoundaryXaI1UTNwqAyKWvLT\nContent-Disposition: form-data; name=\"importfile\"; filename=\"document.csv\"\nContent-Type: application/vnd.ms-excel\n\ninstead I get:\n------WebbbbFormBoundaryXaI1UTNwqAyKWvLT\nContent-Disposition: form-data; name=\"importfile\"; filename=\"document.csv\"\nContent-Type: application/octet-stream\n\nThanks for help guys, answer is:\ncurl_formadd(&formpost, &lastptr, CURLFORM_COPYNAME, \"importfile\", CURLFORM_FILE, \"document.csv\", CURLFORM_CONTENTTYPE, \"application/vnd.ms-excel\", CURLFORM_END);\n\nA:\n\nYou're looking for curl_formadd's option CURLFORM_CONTENTTYPE.\n\n"
}