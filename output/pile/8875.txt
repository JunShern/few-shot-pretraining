{
    "criteria": [
        {
            "criterion": "AllDocuments",
            "passed": true,
            "reason": "All documents pass."
        },
        {
            "criterion": "Domain",
            "passed": false,
            "reason": "Document source unavailable."
        },
        {
            "criterion": "QuestionAnswerStrings",
            "passed": true,
            "reason": "Text contains Q:."
        },
        {
            "criterion": "QuestionAnswerStringsV2",
            "passed": true,
            "reason": "Text contains ['Q:', 'A:']."
        },
        {
            "criterion": "FullyStructured",
            "passed": false,
            "reason": "Does not meet criterion."
        },
        {
            "criterion": "ExamStrings",
            "passed": false,
            "reason": "Does not meet criterion."
        },
        {
            "criterion": "ExamStringsV2",
            "passed": false,
            "reason": "Does not meet criterion."
        },
        {
            "criterion": "ExamplesStrings",
            "passed": false,
            "reason": "Does not meet criterion."
        },
        {
            "criterion": "ListPrefix",
            "passed": false,
            "reason": "Found 0 list prefixes. (Min: 5)"
        },
        {
            "criterion": "ListPrefixV2",
            "passed": true,
            "reason": "Text contains ['1', '2', '3', '4', '5', '6', '7', '8', '9', '1']."
        },
        {
            "criterion": "ExamplesMinimalEmbed",
            "passed": false,
            "reason": "Does not meet criterion."
        },
        {
            "criterion": "ExamplesSynonymsEmbed",
            "passed": false,
            "reason": "Does not meet criterion."
        },
        {
            "criterion": "ExamplesDiverseEmbed",
            "passed": true,
            "reason": "Text contains [\"It's easy enough to change one value of rank_order, with lag looking at one previous value of foo (like below), but how do I look at all previous values of foo? (0.197)\"]."
        }
    ],
    "doc_id": "8875",
    "text": "Q:\n\nChange on column based on any previous values in another column\n\nI have a dataframe like so:\nfoo <- c(rep(FALSE, 5), TRUE, rep(FALSE, 4))\nrank_order <- seq(11,20)\n\ndf <- data.frame(rank_order = as.numeric(rank_order),\n                 foo = foo)\n\nWhat I'd like to do is add one to every value of rank_order following a row where df$foo == TRUE.  That means rank_order should look like this:\nrank_order_target <- c(11, 12, 13, 14, 15, 17, 18, 19, 20, 21)\n\nIt's easy enough to change one value of rank_order, with lag looking at one previous value of foo (like below), but how do I look at all previous values of foo?\ndf %>% \n  mutate(rank_order_new = case_when(lag(foo, default = FALSE) == TRUE ~ rank_order + 1,\n                          TRUE ~ rank_order))\n   rank_order   foo rank_order_new\n1          11 FALSE             11\n2          12 FALSE             12\n3          13 FALSE             13\n4          14 FALSE             14\n5          15 FALSE             15\n6          16  TRUE             16\n7          17 FALSE             18\n8          18 FALSE             18\n9          19 FALSE             19\n10         20 FALSE             20\n\nEither a base solution, or something tidyverse would be helpful.\n\nA:\n\nWe can use cumsum\nlibrary(dplyr)\ndf %>%\n     mutate(new = rank_order + cumsum(foo))\n\n"
}