{
    "criteria": [
        {
            "criterion": "AllDocuments",
            "passed": true,
            "reason": "All documents pass."
        },
        {
            "criterion": "QuestionAnswerStringsV2",
            "passed": true,
            "reason": "Text contains ['Q:', 'A:']."
        },
        {
            "criterion": "FullyStructured",
            "passed": false,
            "reason": "Does not meet criterion."
        },
        {
            "criterion": "ExamStringsV2",
            "passed": false,
            "reason": "Does not meet criterion."
        },
        {
            "criterion": "ExamplesStrings",
            "passed": false,
            "reason": "Does not meet criterion."
        },
        {
            "criterion": "ExamplesStringsV2",
            "passed": false,
            "reason": "Does not meet criterion."
        },
        {
            "criterion": "ListPrefixV2",
            "passed": false,
            "reason": "Does not meet criterion."
        },
        {
            "criterion": "ExamplesMinimalEmbed",
            "passed": false,
            "reason": "Does not meet criterion."
        },
        {
            "criterion": "ExamplesSynonymsEmbed",
            "passed": false,
            "reason": "Does not meet criterion."
        },
        {
            "criterion": "ExamplesDiverseEmbed",
            "passed": false,
            "reason": "Does not meet criterion."
        }
    ],
    "doc_id": "6177",
    "text": "Q:\n\nConvert DOM childs to JSON\n\nvar allmenus = $('.dragger-menu').map(function() {\r\n  var li = {};\r\n  $(this).children('li').each(function() {\r\n    switch ($(this).data(\"menu\")) {\r\n      case \"page\":\r\n        li.page = {\r\n          id: $(this).data(\"menu-id\")\r\n        };\r\n        break;\r\n      case \"external-link\":\r\n        li[\"external-link\"] = {\r\n          title: $(this).text().trim(),\r\n          url: $(this).data(\"menu-link\"),\r\n          icon: $(this).children(\"i\").attr(\"class\")\r\n        }\r\n        break;\r\n      case \"dropdown\":\r\n        li.dropdown = {};\r\n        li.dropdown.title = $(this).contents().filter(function() {\r\n          return this.nodeType == Node.TEXT_NODE;\r\n        }).text().trim();\r\n        li.dropdown.data = $(this).children(\"ol\").map(function() {\r\n          var data = {};\r\n          $(this).children(\"li\").each(function() {\r\n            switch ($(this).data(\"menu\")) {\r\n              case \"page\":\r\n                data.page = {\r\n                  id: $(this).data(\"menu-id\")\r\n                };\r\n                break;\r\n              case \"external-link\":\r\n                data[\"external-link\"] = {\r\n                  title: $(this).text().trim(),\r\n                  url: $(this).data(\"menu-link\"),\r\n                  icon: $(this).children(\"i\").attr(\"class\")\r\n                }\r\n                break;\r\n            }\r\n          });\r\n          return data;\r\n        }).get();\r\n        break;\r\n    }\r\n  });\r\n  return li;\r\n}).get();\r\n\r\nvar obj = {\r\n  menu: allmenus\r\n};\r\nvar jsondata = JSON.stringify(obj, null, 2);\r\nconsole.log(jsondata);\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js\"></script>\r\n<ol class=\"dragger-menu\">\r\n   <li class=\"list-group-item\" data-menu=\"page\" data-menu-id=\"24\">Online Register</li>\r\n   <li class=\"list-group-item\" data-menu=\"page\" data-menu-id=\"26\">Secondly Page</li>\r\n   <li class=\"list-group-item\" data-menu=\"dropdown\">\r\n      <i class=\"fa fa-caret-square-o-down\"></i> Dropdown Menu \r\n      <ol class=\"\">\r\n         <li class=\"list-group-item\" data-menu=\"page\" data-menu-id=\"25\">Contact Us</li>\r\n         <li class=\"list-group-item\" data-menu=\"external-link\" data-menu-link=\"https://twitter.com/your-page\"><i class=\"fa fa-Twitter\"></i> Twitter</li>\r\n         <li class=\"list-group-item\" data-menu=\"external-link\" data-menu-link=\"https://facebook.com/your-page\"><i class=\"fa fa-Facebook\"></i> Facebook</li>\r\n      </ol>\r\n   </li>\r\n</ol>\r\n<ol class=\"dragger-menu\">\r\n   <li class=\"list-group-item\" data-menu=\"page\" data-menu-id=\"28\">Ahmet Deneme</li>\r\n   <li class=\"list-group-item\" data-menu=\"page\" data-menu-id=\"21\">Secondly Page</li>\r\n</ol>\n\nThe above javascript code does not pass the same type element to json. Example: If you are run the code, you see only page 26, not 24. This code only get last elem in same elem. I want the all elements in json data. What should i do in javascript code ? Sorry for my bad engl\u0131sh . Thanks for all.\n\nA:\n\nDon't build JSON by concatenating strings. Create an object and then use JSON.stringify.\nAnd use jQuery's .each() and .map() methods to loop through the DOM, rather than for loops.\n\nvar allmenus = $('.dragger-menu').map(function() {\r\n  var li = {};\r\n  $(this).children('li').each(function() {\r\n    switch ($(this).data(\"menu\")) {\r\n      case \"page\":\r\n        li.page = {\r\n          id: $(this).data(\"menu-id\")\r\n        };\r\n        break;\r\n      case \"external-link\":\r\n        li[\"external-link\"] = {\r\n          title: $(this).text().trim(),\r\n          url: $(this).data(\"menu-link\"),\r\n          icon: $(this).children(\"i\").attr(\"class\")\r\n        }\r\n        break;\r\n      case \"dropdown\":\r\n        li.dropdown = {};\r\n        li.dropdown.title = $(this).contents().filter(function() {\r\n          return this.nodeType == Node.TEXT_NODE;\r\n        }).text().trim();\r\n        li.dropdown.data = $(this).children(\"ol\").map(function() {\r\n          var data = {};\r\n          $(this).children(\"li\").each(function() {\r\n            switch ($(this).data(\"menu\")) {\r\n              case \"page\":\r\n                data.page = {\r\n                  id: $(this).data(\"menu-id\")\r\n                };\r\n                break;\r\n              case \"external-link\":\r\n                data[\"external-link\"] = {\r\n                  title: $(this).text().trim(),\r\n                  url: $(this).data(\"menu-link\"),\r\n                  icon: $(this).children(\"i\").attr(\"class\")\r\n                }\r\n                break;\r\n            }\r\n          });\r\n          return data;\r\n        }).get();\r\n        break;\r\n    }\r\n  });\r\n  return li;\r\n}).get();\r\n\r\nvar obj = {\r\n  menu: allmenus\r\n};\r\nvar jsondata = JSON.stringify(obj, null, 2);\r\nconsole.log(jsondata);\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js\"></script>\r\n<ol class=\"dragger-menu\">\r\n  <li class=\"list-group-item\" data-menu=\"page\" data-menu-id=\"24\">Online Register</li>\r\n  <li class=\"list-group-item\" data-menu=\"external-link\" data-menu-link=\"https://facebook.com/your-page\"><i class=\"fa fa-facebook\"></i> Facebook</li>\r\n  <li class=\"list-group-item\" data-menu=\"dropdown\">\r\n    <i class=\"fa fa-caret-square-o-down\"></i> Dropdown Menu\r\n    <ol class=\"\">\r\n      <li class=\"list-group-item\" data-menu=\"page\" data-menu-id=\"25\">Contact Us</li>\r\n      <li class=\"list-group-item\" data-menu=\"external-link\" data-menu-link=\"https://twitter.com/your-page\"><i class=\"fa fa-Twitter\"></i> Twitter</li>\r\n    </ol>\r\n  </li>\r\n</ol>\r\n<ol class=\"dragger-menu\">\r\n  <li class=\"list-group-item\" data-menu=\"page\" data-menu-id=\"28\">Ahmet Deneme</li>\r\n</ol>\n\nThe code to get the title of the dropdown came from How to get the text node of an element?. It would be easier if you put that text inside a <span> so you can write a selector for it.\n\n"
}