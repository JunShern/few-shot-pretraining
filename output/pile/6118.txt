{
    "criteria": [
        {
            "criterion": "AllDocuments",
            "passed": true,
            "reason": "All documents pass."
        },
        {
            "criterion": "Domain",
            "passed": false,
            "reason": "Document source unavailable."
        },
        {
            "criterion": "QuestionAnswerStrings",
            "passed": true,
            "reason": "Text contains Q:."
        },
        {
            "criterion": "QuestionAnswerStringsV2",
            "passed": true,
            "reason": "Text contains ['Q:', 'A:']."
        },
        {
            "criterion": "FullyStructured",
            "passed": false,
            "reason": "Does not meet criterion."
        },
        {
            "criterion": "ExamStrings",
            "passed": false,
            "reason": "Does not meet criterion."
        },
        {
            "criterion": "ExamStringsV2",
            "passed": false,
            "reason": "Does not meet criterion."
        },
        {
            "criterion": "ExamplesStrings",
            "passed": false,
            "reason": "Does not meet criterion."
        },
        {
            "criterion": "ListPrefix",
            "passed": false,
            "reason": "Found 0 list prefixes. (Min: 5)"
        },
        {
            "criterion": "ListPrefixV2",
            "passed": false,
            "reason": "Does not meet criterion."
        },
        {
            "criterion": "ExamplesMinimalEmbed",
            "passed": false,
            "reason": "Does not meet criterion."
        },
        {
            "criterion": "ExamplesSynonymsEmbed",
            "passed": false,
            "reason": "Does not meet criterion."
        },
        {
            "criterion": "ExamplesDiverseEmbed",
            "passed": false,
            "reason": "Does not meet criterion."
        }
    ],
    "doc_id": "6118",
    "text": "Q:\n\nsame branch same quarter number calculation\n\nWhat I need to add is when employee title X switches to a different title (Y or Z) within the SAME branch, to modify their Total FTE for the time in the quarter that they were in that new title (Y or Z).\nSo the logic is:\nFor position X to Y\nIF [Position Start Date] is between [Q2 start date] AND [Q2 end date]\nand [Employee Title] of [Employee ID] was X and is now Y\nTHEN [Total FTE calculated] = (((([Position Start Date] - [Quarter Start Date])/[Days in Quarter]) * [Total FTE]) + ((([Quarter End Date] - [Position Start Date])/[Days in Quarter]) * [Total FTE]) * 0.5)\n\nFor position X to Z\nAND IF [Position Start Date] is between [Q2 start date] AND [Q2 end date]\nAND [Employee Title] of [Employee ID] was X and is now Z\nTHEN [Total FTE calculated] = ([Position Start Date] - [Quarter Start Date])/[Days in Quarter]) * [Total FTE])\n\nELSE [Total FTE Calculated] = [Total FTE] * 1\nEND\n\nAs you can see I'm missing knowledge of some of the SQL operators to do this properly. Any help you can provide would be greatly appreciated!\nPlease and thank you!\n\nA:\n\nA rough sketch, date arithmetic differs a lot between different vendors of DBMS so I used your expressions. I've used the variable :new_emplyee_title for the new title. \nupdate Employees\n    set [Total FTE calculated] = case when :new_emplyee_title = Y \n                                      then [ expression for Y ]\n                                      else [ expression for Z ] \n                                 end\nwhere [Position Start Date] between [Q2 start date] AND [Q2 end date]\n  and [Employee Title] = X\n  and :new_emplyee_title in (Y,Z);\n\nIf you DBMS support triggers, this would fit like hand in glove in an update trigger.\n\n"
}